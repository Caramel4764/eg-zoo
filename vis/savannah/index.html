<!DOCTYPE html>
<html lang="en">
<head>
    <title>Savannah - NZEG</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.2.0/dist/aframe-extras.min.js"></script>
</head>
<body>
    <script>
        // function calcAngle(from, to) {
        //     let a = to[0] - from[0];
        //     let b = to[2] - from[2];

        //     let theta = Math.tan(a / b);
        //     console.log(theta)
            
        //     return (`0 ${theta} 0`);
        // }
    </script>
    <a-scene>
        <a-assets>
        </a-assets>
            <!-- x -13.25 z -->
            <a-entity
                id="savannah"
                gltf-model="./assets/savannah.glb"
                position="-280 -13.25 475" 
            ></a-entity>
            <a-entity
                id="giraffe-A1"
                gltf-model="./assets/giraffeAdult.glb"
                position="-29.604 0 1.606"
                scale="2 2 2"
                animation__0="
                    property: position;
                    from: -29.604 0 1.606;
                    to: -29.604 0 1.606;
                    dur: 0;
                "
                animation__1a="
                    startEvents: animationcomplete__0, animationcomplete__1f;
                    property: position;
                    from: -29.604 0 1.606;
                    to: 36.809 0 -8.008;
                    autoplay: true;
                    dur: 15000;
                "
                animation__1b="
                    startEvents: animationcomplete__1a;
                    property: rotation;
                    from: 0 0 0;
                    to: 0 0 0;
                    autoplay: false;
                    dur: 5000;
                "
                animation__1c="
                    startEvents: animationcomplete__1b;
                    property: position;
                    from: 36.809 0 -8.008;
                    to: -6.379 0 22.632;
                    autoplay: false;
                    dur: 5000;
                "
                animation__1d="
                    startEvents: animationcomplete__1c;
                    property: rotation;
                    from: 0 0 0;
                    to: 0 0 0;
                    autoplay: false;
                    dur: 10000;
                "
                animation__1e="
                    startEvents: animationcomplete__1d;
                    property: position;
                    from: 36.809 0 -8.008;
                    to: -6.379 0 22.632;
                    autoplay: false;
                    dur: 10000;
                "
                animation__1f="
                    startEvents: animationcomplete__1d;
                    property: position;
                    from: -6.379 0 22.632;
                    to: -29.604 0 1.606;
                    autoplay: false;
                    dur: 5000;
                "
            >
            </a-entity>
            
        <a-box position="5 0 5" color="blue"></a-box>
    </a-scene>

    <script>
        var el = document.querySelector('#giraffe-A1')

        // object
        let giraffeAnimation = {
            endDrinking: 'EndDrinking'
        }

        function animationCorresponder(event) {
            switch(event.detail.name) {
                case "animation__1a":
                    el.setAttribute('animation-mixer', {'clip': 'loopWalk'});
                    break;
                case "animation__1b":    
                    el.setAttribute('animation-mixer', {'clip': 'loopEating'});
                    break;
                case "animation__1c":
                    el.setAttribute('animation-mixer', {'clip': 'loopRun'});
                    break;
                case "animation__1d":
                    el.setAttribute('animation-mixer', {'clip': 'loopIdle01'});
                    break;
                case "animation__1e":
                    el.setAttribute('animation-mixer', {'clip': 'loopRun'});
                    break;
                default:
                    break;
            }
        }

        el.addEventListener('animationbegin', function (e) {
            console.log(e.detail.name);
        })

        el.addEventListener('animationbegin', animationCorresponder)
    </script>
</body>
</html>