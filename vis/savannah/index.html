<!DOCTYPE html>
<html lang="en">
<head>
    <title>Savannah - NZEG</title>
    <link rel="stylesheet" href="../styles/nav.css">
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.2.0/dist/aframe-extras.min.js"></script>
</head>
<body>
    <script>
        // function calcAngle(from, to) {
        //     let a = to[0] - from[0];
        //     let b = to[2] - from[2];

        //     let theta = Math.tan(a / b);
        //     console.log(theta)
            
        //     return (`0 ${theta} 0`);
        // }
    </script>
    <!-- arrows for navigation -->
    <div>
        <button class="navigationButton navigationText" id="leftNavigationButton"><p class="center">&lt</p></button>
        <div id="navigationIndexDiv">
          <!--inital animal for navigation-->
          <p id="navigationIndex">Lion</p>
        </div>
        <button class="navigationButton navigationText" id="rightNavigationButton"><p class="center">&gt</p></button>
    </div>
    <a-scene id="aframe">
        <a-assets>
        </a-assets>
            <!-- x -13.25 z -->
            <a-entity
                id="savannah"
                gltf-model="./assets/savannah.glb"
                position="-280 -13.25 475" 
            ></a-entity>
            <a-entity
                id="giraffe-A1"
                gltf-model="./assets/giraffeAdult.glb"
                position="-26.998 -0.503 6.733"
                scale="1.75 1.75 1.75"
                animation__0="
                    property: position;
                    from: -26.998 -0.503 6.733;
                    to: -26.998 -0.503 6.733;
                    dur: 0;
                "
                animation__1a="
                    startEvents: animationcomplete__0, animationcomplete__1f;
                    property: position;
                    from: -26.998 -0.503 6.733;
                    to: 36.809 -0.251 -8.008;
                    autoplay: true;
                    dur: 25000;
                "
                animation__1b="
                    startEvents: animationcomplete__1a;
                    property: rotation;
                    from: 0 0 0;
                    to: 0 0 0;
                    autoplay: false;
                    dur: 25000;
                "
                animation__1c="
                    startEvents: animationcomplete__1b;
                    property: position;
                    from: 36.809 -0.251 -8.008;
                    to: -6.379 -0.899 22.632;
                    autoplay: false;
                    dur: 16000;
                "
                animation__1d="
                    startEvents: animationcomplete__1c;
                    property: rotation;
                    from: 0 0 0;
                    to: 0 0 0;
                    autoplay: false;
                    dur: 30000;
                "
                animation__1e="
                    startEvents: animationcomplete__1d;
                    property: position;
                    from: -6.379 -0.899 22.632;
                    to: -26.998 0 6.733;
                    autoplay: false;
                    dur: 12500;
                "
                animation__1f="
                    startEvents: animationcomplete__1e;
                    property: rotation;
                    from: 0 0 0;
                    to: 0 0 0;
                    autoplay: false;
                    dur: 35000;
                "
            >
        </a-entity>
        <a-entity id="camera" camera="" position="-5.32348 2.77253 33.85177" wasd-controls="" rotation="-4.010704565915761 -16.730367617819976 0" 
            look-controls="" aframe-injected="" data-aframe-inspector-original-camera=""></a-entity> 
    </a-scene>
    <script>
        var el = document.querySelector('#giraffe-A1')

        // object
        let giraffeAnimation = {
            endDrinking: 'EndDrinking'
        }

        function animationCorresponder(event) {
            switch(event.detail.name) {
                case "animation__1a":
                    el.setAttribute('animation-mixer', {'clip': 'loopWalk'});
                    break;
                case "animation__1b":    
                    el.setAttribute('animation-mixer', {'clip': 'loopEating'});
                    break;
                case "animation__1c":
                    el.setAttribute('animation-mixer', {'clip': 'loopWalk'});
                    break;
                case "animation__1d":
                    el.setAttribute('animation-mixer', {'clip': 'loopIdle01'});
                    break;
                case "animation__1e":
                    el.setAttribute('animation-mixer', {'clip': 'loopWalk'});
                    break;
                case "animation__1f":
                    el.setAttribute('animation-mixer', {'clip': 'loopIdle01'});
                default:
                    break;
            }
        }

        el.addEventListener('animationbegin', function (e) {
            console.log(e.detail.name);
        })

        el.addEventListener('animationbegin', animationCorresponder)
    </script>
    <script type="module" src="../scripts/cameraNavigation.js"></script>
</body>
</html>